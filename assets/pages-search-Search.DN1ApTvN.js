import{_ as e}from"./uni-search-bar.XPhPvkDh.js";import{j as l,k as a,l as s,o as t,m as u,c as n,w as o,f as c,a as i,F as r,i as d,g as h,p as _,D as v,h as m,t as p,Y as f,n as y}from"./index-l0KxtmT8.js";import{s as k,c as g,d as L,e as C}from"./index.CMpXFxYc.js";import{_ as E}from"./uni-icons.c8M9YEq8.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";const U=T(l({__name:"DefaultList",props:{list:{},historyList:{}},emits:["changeHistory","changeValue"],setup(e,{emit:l}){const f=e,y=l,k=()=>{v({title:"提示",content:"是否清空历史记录",success:e=>{e.confirm&&y("changeHistory")}})};return(e,l)=>{const v=m,g=a(s("uni-icons"),E),L=d;return t(),u(r,null,[0!==f.historyList.length?(t(),n(L,{key:0,class:"history"},{default:o((()=>[i(L,{class:"title"},{default:o((()=>[i(v,null,{default:o((()=>[h("搜索历史")])),_:1}),i(g,{type:"trash",size:"20",color:"#ccc",onClick:k})])),_:1}),i(L,{class:"historyList"},{default:o((()=>[(t(!0),u(r,null,_(f.historyList,(e=>(t(),n(L,{key:e,class:"item",onClick:l=>y("changeValue",e)},{default:o((()=>[h(p(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):c("",!0),i(L,{class:"hotList"},{default:o((()=>[i(L,{class:"title"},{default:o((()=>[i(v,null,{default:o((()=>[h("热搜榜")])),_:1})])),_:1}),(t(!0),u(r,null,_(f.list,((e,l)=>(t(),n(L,{key:e.searchWord,class:"item",onClick:l=>y("changeValue",e.searchWord)},{default:o((()=>[i(v,null,{default:o((()=>[h(p(l+1),1)])),_:2},1024),h(" "+p(e.searchWord),1)])),_:2},1032,["onClick"])))),128))])),_:1})],64)}}}),[["__scopeId","data-v-50e71057"]]),V=T(l({__name:"ResultList",props:{list:{}},setup(e){const l=e,a=f(["综合","单曲","歌单","播客","歌手","视频","歌词","专辑","用户"]),s=f(0);return(e,v)=>{const m=d;return t(),u(r,null,[i(m,{class:"tabs"},{default:o((()=>[i(m),(t(!0),u(r,null,_(a.value,((e,l)=>(t(),n(m,{key:e,onClick:e=>(e=>{s.value=e})(l),class:y(["item",{active:s.value===l}])},{default:o((()=>[h(p(e),1)])),_:2},1032,["onClick","class"])))),128))])),_:1}),i(m,{class:"content"},{default:o((()=>[0===s.value?(t(),n(m,{key:0,class:"result"},{default:o((()=>[(t(!0),u(r,null,_(l.list,(e=>(t(),n(m,{key:e.id,class:"item"},{default:o((()=>[h(p(e.name),1)])),_:2},1024)))),128))])),_:1})):c("",!0)])),_:1})],64)}}}),[["__scopeId","data-v-8461670f"]]),S=T(l({__name:"Suggest",props:{list:{}},emits:["changeValue"],setup(e,{emit:l}){const c=e,v=l;return(e,l)=>{const m=a(s("uni-icons"),E),f=d;return t(),n(f,{class:"suggest"},{default:o((()=>[(t(!0),u(r,null,_(c.list,(e=>(t(),n(f,{key:e.keyword,class:"item",onClick:l=>v("changeValue",e.keyword)},{default:o((()=>[i(m,{type:"search",size:"20",color:"#eee",class:"search"}),h(" "+p(e.keyword),1)])),_:2},1032,["onClick"])))),128))])),_:1})}}}),[["__scopeId","data-v-965f86bd"]]),b=l({__name:"Search",setup(l){const o=f("DEFAULT"),d=f([]),h=f("");k().then((e=>{d.value=e.data}));const _=f([]);let v;const m=f([]),p=e=>{0!==e.length?(v&&clearTimeout(v),v=setTimeout((()=>{o.value="SUGGEST",L(e).then((e=>{console.log(e),m.value=e.result.allMatch?e.result.allMatch:[]}))}),500)):(v&&clearTimeout(v),o.value="DEFAULT")},y=f([]),E=e=>{o.value="RESULT",C(e.value).then((l=>{y.value=l.result.songs,_.value.push(e.value)}))},T=e=>{o.value="DEFAULT"},b=f("");g().then((e=>{b.value=e.data.realkeyword}));const j=()=>{_.value=[]},D=e=>{h.value=e,C(e).then((l=>{v&&clearTimeout(v),o.value="RESULT",y.value=l.result.songs,_.value.push(e)}))};return(l,v)=>{const f=a(s("uni-search-bar"),e);return t(),u(r,null,[i(f,{placeholder:b.value,bgColor:"#EEEEEE",onConfirm:E,radius:"20",onInput:p,cancelText:"取消",onCancel:T,modelValue:h.value,"onUpdate:modelValue":v[0]||(v[0]=e=>h.value=e)},null,8,["placeholder","modelValue"]),"DEFAULT"===o.value?(t(),n(U,{key:0,list:d.value,historyList:_.value,onChangeHistory:j,onChangeValue:D},null,8,["list","historyList"])):"RESULT"===o.value?(t(),n(V,{key:1,list:y.value},null,8,["list"])):"SUGGEST"===o.value?(t(),n(S,{key:2,list:m.value,onChangeValue:D},null,8,["list"])):c("",!0)],64)}}});export{b as default};
