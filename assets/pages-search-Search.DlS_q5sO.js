import{_ as e}from"./uni-search-bar.Bl-6ARTU.js";import{g as l,h as a,j as s,o as t,k as u,c as n,w as o,a as i,m as c,F as r,l as d,f as h,C as v,V as m,i as _,t as p,Y as f,n as y,P as k,I as g}from"./index-LaPygNFG.js";import{s as C,e as L,f as E,h as T}from"./index.fIdgyL-l.js";import{_ as V}from"./uni-icons.YQraCPnh.js";import{_ as U}from"./plugin-vueexport-helper.BCo6x5W8.js";const S=U(l({__name:"DefaultList",props:{list:{},historyList:{}},emits:["changeHistory","changeValue"],setup(e,{emit:l}){const f=e,y=l,k=()=>{v({title:"提示",content:"是否清空历史记录",success:e=>{e.confirm&&y("changeHistory")}})};return(e,l)=>{const v=m,g=a(s("uni-icons"),V),C=_;return t(),u(r,null,[0!==f.historyList.length?(t(),n(C,{key:0,class:"history"},{default:o((()=>[i(C,{class:"title"},{default:o((()=>[i(v,null,{default:o((()=>[c("搜索历史")])),_:1}),i(g,{type:"trash",size:"20",color:"#ccc",onClick:k})])),_:1}),i(C,{class:"historyList"},{default:o((()=>[(t(!0),u(r,null,d(f.historyList,(e=>(t(),n(C,{key:e,class:"item",onClick:l=>y("changeValue",e)},{default:o((()=>[c(p(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):h("",!0),i(C,{class:"hotList"},{default:o((()=>[i(C,{class:"title"},{default:o((()=>[i(v,null,{default:o((()=>[c("热搜榜")])),_:1})])),_:1}),(t(!0),u(r,null,d(f.list,((e,l)=>(t(),n(C,{key:e.searchWord,class:"item",onClick:l=>y("changeValue",e.searchWord)},{default:o((()=>[i(v,null,{default:o((()=>[c(p(l+1),1)])),_:2},1024),c(" "+p(e.searchWord),1)])),_:2},1032,["onClick"])))),128))])),_:1})],64)}}}),[["__scopeId","data-v-50e71057"]]),b=U(l({__name:"ResultList",props:{list:{}},setup(e){const l=e,a=f(["综合","单曲","歌单","播客","歌手","视频","歌词","专辑","用户"]),s=f(0);return(e,v)=>{const m=_;return t(),u(r,null,[i(m,{class:"tabs"},{default:o((()=>[i(m),(t(!0),u(r,null,d(a.value,((e,l)=>(t(),n(m,{key:e,onClick:e=>(e=>{s.value=e})(l),class:y(["item",{active:s.value===l}])},{default:o((()=>[c(p(e),1)])),_:2},1032,["onClick","class"])))),128))])),_:1}),i(m,{class:"content"},{default:o((()=>[0===s.value?(t(),n(m,{key:0,class:"result"},{default:o((()=>[(t(!0),u(r,null,d(l.list,(e=>(t(),n(m,{key:e.id,class:"item",onClick:l=>{return a=e.id,k({url:`/pages/player/player?id=${a}`}),void g("ids",a);var a}},{default:o((()=>[c(p(e.name),1)])),_:2},1032,["onClick"])))),128))])),_:1})):h("",!0)])),_:1})],64)}}}),[["__scopeId","data-v-366e6d13"]]),j=U(l({__name:"Suggest",props:{list:{}},emits:["changeValue"],setup(e,{emit:l}){const h=e,v=l;return(e,l)=>{const m=a(s("uni-icons"),V),f=_;return t(),n(f,{class:"suggest"},{default:o((()=>[(t(!0),u(r,null,d(h.list,(e=>(t(),n(f,{key:e.keyword,class:"item",onClick:l=>v("changeValue",e.keyword)},{default:o((()=>[i(m,{type:"search",size:"20",color:"#eee",class:"search"}),c(" "+p(e.keyword),1)])),_:2},1032,["onClick"])))),128))])),_:1})}}}),[["__scopeId","data-v-965f86bd"]]),w=l({__name:"Search",setup(l){const o=f("DEFAULT"),c=f([]),d=f("");C().then((e=>{c.value=e.data}));const v=f([]);let m;const _=f([]),p=e=>{0!==e.length?(m&&clearTimeout(m),m=setTimeout((()=>{o.value="SUGGEST",E(e).then((e=>{console.log(e),_.value=e.result.allMatch?e.result.allMatch:[]}))}),500)):(m&&clearTimeout(m),o.value="DEFAULT")},y=f([]),k=e=>{o.value="RESULT",T(e.value).then((l=>{y.value=l.result.songs,v.value.push(e.value)}))},g=e=>{o.value="DEFAULT"},V=f("");L().then((e=>{V.value=e.data.realkeyword}));const U=()=>{v.value=[]},w=e=>{d.value=e,T(e).then((l=>{m&&clearTimeout(m),o.value="RESULT",y.value=l.result.songs,v.value.push(e)}))};return(l,m)=>{const f=a(s("uni-search-bar"),e);return t(),u(r,null,[i(f,{placeholder:V.value,bgColor:"#EEEEEE",onConfirm:k,radius:"20",onInput:p,cancelText:"取消",onCancel:g,modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=e=>d.value=e)},null,8,["placeholder","modelValue"]),"DEFAULT"===o.value?(t(),n(S,{key:0,list:c.value,historyList:v.value,onChangeHistory:U,onChangeValue:w},null,8,["list","historyList"])):"RESULT"===o.value?(t(),n(b,{key:1,list:y.value},null,8,["list"])):"SUGGEST"===o.value?(t(),n(j,{key:2,list:_.value,onChangeValue:w},null,8,["list"])):h("",!0)],64)}}});export{w as default};
