import{_ as e}from"./uni-search-bar.CRUzrtZ7.js";import{g as l,h as a,j as s,o as t,k as u,c as n,w as o,a as c,m as i,F as r,l as d,f as h,C as v,V as m,i as _,t as f,Y as p,n as y}from"./index-qUaOd7O9.js";import{s as k,e as g,f as C,h as L}from"./index.UJRrRih4.js";import{_ as E}from"./uni-icons.C-KtrY-H.js";import{_ as T}from"./plugin-vueexport-helper.BCo6x5W8.js";const V=T(l({__name:"DefaultList",props:{list:{},historyList:{}},emits:["changeHistory","changeValue"],setup(e,{emit:l}){const p=e,y=l,k=()=>{v({title:"提示",content:"是否清空历史记录",success:e=>{e.confirm&&y("changeHistory")}})};return(e,l)=>{const v=m,g=a(s("uni-icons"),E),C=_;return t(),u(r,null,[0!==p.historyList.length?(t(),n(C,{key:0,class:"history"},{default:o((()=>[c(C,{class:"title"},{default:o((()=>[c(v,null,{default:o((()=>[i("搜索历史")])),_:1}),c(g,{type:"trash",size:"20",color:"#ccc",onClick:k})])),_:1}),c(C,{class:"historyList"},{default:o((()=>[(t(!0),u(r,null,d(p.historyList,(e=>(t(),n(C,{key:e,class:"item",onClick:l=>y("changeValue",e)},{default:o((()=>[i(f(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):h("",!0),c(C,{class:"hotList"},{default:o((()=>[c(C,{class:"title"},{default:o((()=>[c(v,null,{default:o((()=>[i("热搜榜")])),_:1})])),_:1}),(t(!0),u(r,null,d(p.list,((e,l)=>(t(),n(C,{key:e.searchWord,class:"item",onClick:l=>y("changeValue",e.searchWord)},{default:o((()=>[c(v,null,{default:o((()=>[i(f(l+1),1)])),_:2},1024),i(" "+f(e.searchWord),1)])),_:2},1032,["onClick"])))),128))])),_:1})],64)}}}),[["__scopeId","data-v-50e71057"]]),U=T(l({__name:"ResultList",props:{list:{}},setup(e){const l=e,a=p(["综合","单曲","歌单","播客","歌手","视频","歌词","专辑","用户"]),s=p(0);return(e,v)=>{const m=_;return t(),u(r,null,[c(m,{class:"tabs"},{default:o((()=>[c(m),(t(!0),u(r,null,d(a.value,((e,l)=>(t(),n(m,{key:e,onClick:e=>(e=>{s.value=e})(l),class:y(["item",{active:s.value===l}])},{default:o((()=>[i(f(e),1)])),_:2},1032,["onClick","class"])))),128))])),_:1}),c(m,{class:"content"},{default:o((()=>[0===s.value?(t(),n(m,{key:0,class:"result"},{default:o((()=>[(t(!0),u(r,null,d(l.list,(e=>(t(),n(m,{key:e.id,class:"item"},{default:o((()=>[i(f(e.name),1)])),_:2},1024)))),128))])),_:1})):h("",!0)])),_:1})],64)}}}),[["__scopeId","data-v-8461670f"]]),S=T(l({__name:"Suggest",props:{list:{}},emits:["changeValue"],setup(e,{emit:l}){const h=e,v=l;return(e,l)=>{const m=a(s("uni-icons"),E),p=_;return t(),n(p,{class:"suggest"},{default:o((()=>[(t(!0),u(r,null,d(h.list,(e=>(t(),n(p,{key:e.keyword,class:"item",onClick:l=>v("changeValue",e.keyword)},{default:o((()=>[c(m,{type:"search",size:"20",color:"#eee",class:"search"}),i(" "+f(e.keyword),1)])),_:2},1032,["onClick"])))),128))])),_:1})}}}),[["__scopeId","data-v-965f86bd"]]),b=l({__name:"Search",setup(l){const o=p("DEFAULT"),i=p([]),d=p("");k().then((e=>{i.value=e.data}));const v=p([]);let m;const _=p([]),f=e=>{0!==e.length?(m&&clearTimeout(m),m=setTimeout((()=>{o.value="SUGGEST",C(e).then((e=>{console.log(e),_.value=e.result.allMatch?e.result.allMatch:[]}))}),500)):(m&&clearTimeout(m),o.value="DEFAULT")},y=p([]),E=e=>{o.value="RESULT",L(e.value).then((l=>{y.value=l.result.songs,v.value.push(e.value)}))},T=e=>{o.value="DEFAULT"},b=p("");g().then((e=>{b.value=e.data.realkeyword}));const j=()=>{v.value=[]},w=e=>{d.value=e,L(e).then((l=>{m&&clearTimeout(m),o.value="RESULT",y.value=l.result.songs,v.value.push(e)}))};return(l,m)=>{const p=a(s("uni-search-bar"),e);return t(),u(r,null,[c(p,{placeholder:b.value,bgColor:"#EEEEEE",onConfirm:E,radius:"20",onInput:f,cancelText:"取消",onCancel:T,modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=e=>d.value=e)},null,8,["placeholder","modelValue"]),"DEFAULT"===o.value?(t(),n(V,{key:0,list:i.value,historyList:v.value,onChangeHistory:j,onChangeValue:w},null,8,["list","historyList"])):"RESULT"===o.value?(t(),n(U,{key:1,list:y.value},null,8,["list"])):"SUGGEST"===o.value?(t(),n(S,{key:2,list:_.value,onChangeValue:w},null,8,["list"])):h("",!0)],64)}}});export{b as default};
