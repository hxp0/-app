import{g as a,h as s,j as l,o as e,k as t,a as o,w as n,n as u,m as c,t as i,F as r,q as d,i as f,c as g,Z as p,Y as v,J as _,$ as h,b as y,a0 as m,a1 as x,a2 as b}from"./index-BDOIPGQE.js";import{p as k,b as w}from"./index.QxF1F2_y.js";import{_ as P}from"./uni-badge.0mULz1Iw.js";import{_ as j}from"./plugin-vueexport-helper.BCo6x5W8.js";const C=j(a({__name:"Record",props:["bgUrl","isPaused","isplay","songName","artists"],emits:["changeShow"],setup(a,{emit:g}){const p=g;return(g,v)=>{const _=d,h=f,y=s(l("uni-badge"),P);return e(),t(r,null,[o(h,{class:"play",onClick:v[0]||(v[0]=a=>p("changeShow"))},{default:n((()=>[o(h,{class:u(["playImg",{paused:!a.isPaused}])},{default:n((()=>[o(_,{mode:"heightFix",src:"/assets/white_circle-BqNO7vO7.png"})])),_:1},8,["class"]),o(h,{class:"bl_circle"},{default:n((()=>[o(_,{mode:"heightFix",src:"/assets/black_circle-BpXxhfCl.png"})])),_:1}),o(h,{class:u(["songPic",{paused:!a.isPaused}])},{default:n((()=>[o(_,{src:a.bgUrl},null,8,["src"])])),_:1},8,["class"]),o(h,{class:"stylus"},{default:n((()=>[o(_,{src:"/assets/stylus-rkdmo8lr.png"})])),_:1}),o(h,{class:u({songPlay:a.isplay,songPause:!a.isplay})},null,8,["class"])])),_:1}),o(h,{class:"songInfo"},{default:n((()=>[o(h,{class:"infoLeft"},{default:n((()=>[o(h,{class:"songName"},{default:n((()=>[c(i(a.songName),1)])),_:1}),o(h,{class:"songArtists"},{default:n((()=>[c(i(a.artists),1)])),_:1})])),_:1}),o(h,{class:"infoRight"},{default:n((()=>[o(y,{size:"small",text:100,absolute:"rightTop",type:"default"},{default:n((()=>[o(h,{class:"infoRight_L iconfont icon-hear"})])),_:1}),o(y,{size:"small",text:100,absolute:"rightTop",type:"default"},{default:n((()=>[o(h,{class:"infoRight_R iconfont icon-xiaoxi"})])),_:1})])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-80f4e3b0"]]),N=j(a({__name:"Lyric",emits:["changeShow"],setup(a,{emit:s}){const l=s;return(a,s)=>{const t=f;return e(),g(t,{class:"lyric",onClick:s[0]||(s[0]=a=>l("changeShow"))},{default:n((()=>[p("h1",null,"歌词组件")])),_:1})}}}),[["__scopeId","data-v-85c32a6b"]]),S=j(a({__name:"player",setup(a){const s=v(),l=v(),t=v(!0),r=v(!1),d=v(!1),p=v(!1),P=v(),j=v();let S=null;const T=v(),U=v(),I=v("0"),R=v("00:00"),F=v(),q=v();q.value=_("id");const z=a=>{let s=0,l=0,e=0;return s=Math.floor(a/60/60),l=Math.floor(a/60%60),e=Math.floor(a%60),0===s?D(l)+":"+D(e):D(s)+":"+D(l)+":"+D(e)},D=a=>a<10?"0"+a:a;h((()=>{console.log(q.value),(async a=>{var l,e,t,o;try{p.value=!0;let n=await k(a);console.log("Detail",n.songs),s.value=null==(l=n.songs[0])?void 0:l.al.picUrl,P.value=(null==(e=n.songs[0])?void 0:e.al.name)+"("+(null==(t=n.songs[0])?void 0:t.alia.map((a=>a)))+")",j.value=null==(o=n.songs[0])?void 0:o.ar.map((a=>a.name)).join("/")}catch(n){console.log(n)}finally{p.value=!1}})(q.value),(async a=>{try{p.value=!0;let s=await w(a);console.log("url",s.data),l.value=s.data[0].url,R.value=z(0),F.value=z(s.data[0].time/1e3)}catch(s){console.log(s)}finally{p.value=!1}})(q.value)}));const L=()=>{r.value=!r.value,d.value=!d.value,S&&S.src===l.value||(S=b(),S.src=l.value),r.value?S.play():S.pause(),M(S)},M=a=>{a.onEnded((()=>{r.value=!1,d.value=!1,R.value=z(0),I.value="0"})),a.onTimeUpdate((()=>{const s=(a.currentTime/a.duration*100).toFixed(2)+"%";I.value=s,R.value=z(a.currentTime),F.value=z(a.duration)}))},B=()=>{t.value=!t.value};return(a,l)=>{const v=f;return e(),g(v,{class:"player",ref:"player",style:y("background:url("+s.value+") no-repeat center/1000% 1000%")},{default:n((()=>[o(v,{class:"position"},{default:n((()=>[o(v,{class:"header"},{default:n((()=>[o(v,{class:"left iconfont icon--xiangxiajiantou"}),o(v,{class:"center"},{default:n((()=>[c("私人漫游 默认模式")])),_:1}),o(v,{class:"right iconfont icon-fasong01"})])),_:1}),t.value?(e(),g(C,{key:0,bgUrl:s.value,isPaused:d.value,isplay:r.value,songName:P.value,artists:j.value,onChangeShow:B},null,8,["bgUrl","isPaused","isplay","songName","artists"])):(e(),g(N,{key:1,onChangeShow:B})),o(v,{class:"prog",ref_key:"prog",ref:U},{default:n((()=>[o(v,{class:"progress"}),o(v,{class:"roundDot",ref_key:"roundDot",ref:T,style:y("left:"+I.value)},null,8,["style"]),o(v,{class:"proText"},{default:n((()=>[o(v,{style:{width:"50px"}},{default:n((()=>[c(i(R.value),1)])),_:1}),o(v,null,{default:n((()=>[c("极高")])),_:1}),o(v,{style:{width:"40px"}},{default:n((()=>[c(i(F.value),1)])),_:1})])),_:1})])),_:1},512),o(v,{class:"songPlay"},{default:n((()=>[o(v,{class:"iconfont icon-danquxunhuan"}),o(v,{class:"songPlay_C"},{default:n((()=>[o(v,{class:"iconfont icon-shangyishou"}),o(v,{class:u(["iconfont",{"icon-icon_play":!r.value,"icon-zanting":r.value}]),onClick:L},null,8,["class"]),o(v,{class:"iconfont icon-xiayishou"})])),_:1}),o(v,{class:"iconfont icon-bofangliebiao-copy"})])),_:1})])),_:1}),m(o(v,{class:"mask"},{default:n((()=>[c("加载中...")])),_:1},512),[[x,p.value]])])),_:1},8,["style"])}}}),[["__scopeId","data-v-80a17375"]]);export{S as default};
