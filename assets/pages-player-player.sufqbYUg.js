import{g as a,h as s,j as l,o as e,c as t,w as n,a as o,n as u,m as c,t as i,q as r,i as d,Z as f,Y as v,$ as g,J as p,a0 as _,b as h,a1 as y,a2 as m,a3 as b}from"./index-LaPygNFG.js";import{p as x,b as w}from"./index.fIdgyL-l.js";import{_ as k}from"./uni-badge.CC3RVxVS.js";import{_ as P}from"./plugin-vueexport-helper.BCo6x5W8.js";const j=P(a({__name:"Record",props:["bgUrl","isPaused","isplay","songName","artists"],emits:["changeShow"],setup(a,{emit:f}){const v=f;return(f,g)=>{const p=r,_=d,h=s(l("uni-badge"),k);return e(),t(_,{class:"wh"},{default:n((()=>[o(_,{class:"play",onClick:g[0]||(g[0]=a=>v("changeShow"))},{default:n((()=>[o(_,{class:u(["playImg",{paused:!a.isPaused}])},{default:n((()=>[o(p,{mode:"heightFix",src:"/assets/white_circle-BqNO7vO7.png"})])),_:1},8,["class"]),o(_,{class:"bl_circle"},{default:n((()=>[o(p,{mode:"heightFix",src:"/assets/black_circle-BpXxhfCl.png"})])),_:1}),o(_,{class:u(["songPic",{paused:!a.isPaused}])},{default:n((()=>[o(p,{src:a.bgUrl},null,8,["src"])])),_:1},8,["class"]),o(_,{class:"stylus"},{default:n((()=>[o(p,{src:"/assets/stylus-rkdmo8lr.png"})])),_:1}),o(_,{class:u({songPlay:a.isplay,songPause:!a.isplay})},null,8,["class"])])),_:1}),o(_,{class:"songInfo"},{default:n((()=>[o(_,{class:"infoLeft"},{default:n((()=>[o(_,{class:"songName"},{default:n((()=>[c(i(a.songName),1)])),_:1}),o(_,{class:"songArtists"},{default:n((()=>[c(i(a.artists),1)])),_:1})])),_:1}),o(_,{class:"infoRight"},{default:n((()=>[o(h,{size:"small",text:100,absolute:"rightTop",type:"default"},{default:n((()=>[o(_,{class:"infoRight_L iconfont icon-hear"})])),_:1}),o(h,{size:"small",text:100,absolute:"rightTop",type:"default"},{default:n((()=>[o(_,{class:"infoRight_R iconfont icon-xiaoxi"})])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-3817abc3"]]),C=P(a({__name:"Lyric",emits:["changeShow"],setup(a,{emit:s}){const l=s;return(a,s)=>{const o=d;return e(),t(o,{class:"lyric",onClick:s[0]||(s[0]=a=>l("changeShow"))},{default:n((()=>[f("h1",null,"歌词组件")])),_:1})}}}),[["__scopeId","data-v-6acbb690"]]),N=P(a({__name:"player",setup(a){const s=v(),l=v(),r=v(!0),f=v(!1),k=v(!1),P=v(!1),N=v(),S=v();let T=null;const U=v(),I=v(),R=v(),q=v("00:00"),z=v(),F=v(),L=v();g((()=>{F.value=p("id"),F.value!==L.value&&(P.value=!0,f.value=!1,k.value=!1,q.value=M(0),R.value="0",null==T||T.stop(),T=null,P.value=!1)}));const M=a=>{let s=0,l=0,e=0;return s=Math.floor(a/60/60),l=Math.floor(a/60%60),e=Math.floor(a%60),0===s?B(l)+":"+B(e):B(s)+":"+B(l)+":"+B(e)},B=a=>a<10?"0"+a:a;_((()=>{(async a=>{var l,e,t,n,o;try{P.value=!0;let u=await x(a);s.value=null==(l=u.songs[0])?void 0:l.al.picUrl,N.value=(null==(e=u.songs[0])?void 0:e.name)+(0===(null==(t=u.songs[0])?void 0:t.alia.length)?"":"("+(null==(n=u.songs[0])?void 0:n.alia.map((a=>a)))+")"),S.value=null==(o=u.songs[0])?void 0:o.ar.map((a=>a.name)).join("/")}catch(u){console.log(u)}finally{P.value=!1}})(F.value||2146688401),(async a=>{try{P.value=!0;let s=await w(a);L.value=a,l.value=s.data[0].url,q.value=M(0),z.value=M(s.data[0].time/1e3)}catch(s){console.log(s)}finally{P.value=!1}})(F.value||2146688401)}));const D=()=>{f.value=!f.value,k.value=!k.value,T||(T=b(),T.src=l.value),f.value?T.play():T.pause(),O(T)},O=a=>{a.onEnded((()=>{f.value=!1,k.value=!1,q.value=M(0),R.value="0"})),a.onTimeUpdate((()=>{const s=(a.currentTime/a.duration*100).toFixed(2)+"%";R.value=s,q.value=M(a.currentTime),z.value=M(a.duration)}))},A=()=>{r.value=!r.value};return(a,l)=>{const v=d;return e(),t(v,{class:"player",ref:"player",style:h("background:url("+s.value+") no-repeat center/1000% 1000%")},{default:n((()=>[o(v,{class:"position"},{default:n((()=>[o(v,{class:"header"},{default:n((()=>[o(v,{class:"left iconfont icon--xiangxiajiantou"}),o(v,{class:"center"},{default:n((()=>[c("私人漫游 默认模式")])),_:1}),o(v,{class:"right iconfont icon-fasong01"})])),_:1}),r.value?(e(),t(j,{key:0,bgUrl:s.value,isPaused:k.value,isplay:f.value,songName:N.value,artists:S.value,onChangeShow:A},null,8,["bgUrl","isPaused","isplay","songName","artists"])):(e(),t(C,{key:1,onChangeShow:A})),o(v,{class:"prog",ref_key:"prog",ref:I},{default:n((()=>[o(v,{class:"progress"}),o(v,{class:"roundDot",ref_key:"roundDot",ref:U,style:h("left:"+R.value)},null,8,["style"]),o(v,{class:"proText"},{default:n((()=>[o(v,{style:{width:"50px"}},{default:n((()=>[c(i(q.value),1)])),_:1}),o(v,null,{default:n((()=>[c("极高")])),_:1}),o(v,{style:{width:"40px"}},{default:n((()=>[c(i(z.value),1)])),_:1})])),_:1})])),_:1},512),o(v,{class:"songPlay"},{default:n((()=>[o(v,{class:"iconfont icon-danquxunhuan"}),o(v,{class:"songPlay_C"},{default:n((()=>[o(v,{class:"iconfont icon-shangyishou"}),o(v,{class:u(["iconfont",{"icon-icon_play":!f.value,"icon-zanting":f.value}]),onClick:D},null,8,["class"]),o(v,{class:"iconfont icon-xiayishou"})])),_:1}),o(v,{class:"iconfont icon-bofangliebiao-copy"})])),_:1})])),_:1}),y(o(v,{class:"mask"},{default:n((()=>[c("加载中...")])),_:1},512),[[m,P.value]])])),_:1},8,["style"])}}}),[["__scopeId","data-v-48cfe983"]]);export{N as default};
