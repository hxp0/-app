import{_ as e}from"./uni-search-bar.DUE2EopU.js";import{j as l,k as a,l as s,o as t,m as u,c as n,w as o,f as c,a as i,F as r,i as d,g as h,p as v,D as m,h as _,t as p,Y as f,n as y}from"./index-8E7-gHrl.js";import{s as k,d as g,e as L,f as C}from"./index.Bljok1Sp.js";import{_ as E}from"./uni-icons.DGjAAeZp.js";import{_ as T}from"./plugin-vueexport-helper.BCo6x5W8.js";const U=T(l({__name:"DefaultList",props:{list:{},historyList:{}},emits:["changeHistory","changeValue"],setup(e,{emit:l}){const f=e,y=l,k=()=>{m({title:"提示",content:"是否清空历史记录",success:e=>{e.confirm&&y("changeHistory")}})};return(e,l)=>{const m=_,g=a(s("uni-icons"),E),L=d;return t(),u(r,null,[0!==f.historyList.length?(t(),n(L,{key:0,class:"history"},{default:o((()=>[i(L,{class:"title"},{default:o((()=>[i(m,null,{default:o((()=>[h("搜索历史")])),_:1}),i(g,{type:"trash",size:"20",color:"#ccc",onClick:k})])),_:1}),i(L,{class:"historyList"},{default:o((()=>[(t(!0),u(r,null,v(f.historyList,(e=>(t(),n(L,{key:e,class:"item",onClick:l=>y("changeValue",e)},{default:o((()=>[h(p(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):c("",!0),i(L,{class:"hotList"},{default:o((()=>[i(L,{class:"title"},{default:o((()=>[i(m,null,{default:o((()=>[h("热搜榜")])),_:1})])),_:1}),(t(!0),u(r,null,v(f.list,((e,l)=>(t(),n(L,{key:e.searchWord,class:"item",onClick:l=>y("changeValue",e.searchWord)},{default:o((()=>[i(m,null,{default:o((()=>[h(p(l+1),1)])),_:2},1024),h(" "+p(e.searchWord),1)])),_:2},1032,["onClick"])))),128))])),_:1})],64)}}}),[["__scopeId","data-v-50e71057"]]),V=T(l({__name:"ResultList",props:{list:{}},setup(e){const l=e,a=f(["综合","单曲","歌单","播客","歌手","视频","歌词","专辑","用户"]),s=f(0);return(e,m)=>{const _=d;return t(),u(r,null,[i(_,{class:"tabs"},{default:o((()=>[i(_),(t(!0),u(r,null,v(a.value,((e,l)=>(t(),n(_,{key:e,onClick:e=>(e=>{s.value=e})(l),class:y(["item",{active:s.value===l}])},{default:o((()=>[h(p(e),1)])),_:2},1032,["onClick","class"])))),128))])),_:1}),i(_,{class:"content"},{default:o((()=>[0===s.value?(t(),n(_,{key:0,class:"result"},{default:o((()=>[(t(!0),u(r,null,v(l.list,(e=>(t(),n(_,{key:e.id,class:"item"},{default:o((()=>[h(p(e.name),1)])),_:2},1024)))),128))])),_:1})):c("",!0)])),_:1})],64)}}}),[["__scopeId","data-v-8461670f"]]),S=T(l({__name:"Suggest",props:{list:{}},emits:["changeValue"],setup(e,{emit:l}){const c=e,m=l;return(e,l)=>{const _=a(s("uni-icons"),E),f=d;return t(),n(f,{class:"suggest"},{default:o((()=>[(t(!0),u(r,null,v(c.list,(e=>(t(),n(f,{key:e.keyword,class:"item",onClick:l=>m("changeValue",e.keyword)},{default:o((()=>[i(_,{type:"search",size:"20",color:"#eee",class:"search"}),h(" "+p(e.keyword),1)])),_:2},1032,["onClick"])))),128))])),_:1})}}}),[["__scopeId","data-v-965f86bd"]]),b=l({__name:"Search",setup(l){const o=f("DEFAULT"),d=f([]),h=f("");k().then((e=>{d.value=e.data}));const v=f([]);let m;const _=f([]),p=e=>{0!==e.length?(m&&clearTimeout(m),m=setTimeout((()=>{o.value="SUGGEST",L(e).then((e=>{console.log(e),_.value=e.result.allMatch?e.result.allMatch:[]}))}),500)):(m&&clearTimeout(m),o.value="DEFAULT")},y=f([]),E=e=>{o.value="RESULT",C(e.value).then((l=>{y.value=l.result.songs,v.value.push(e.value)}))},T=e=>{o.value="DEFAULT"},b=f("");g().then((e=>{b.value=e.data.realkeyword}));const j=()=>{v.value=[]},D=e=>{h.value=e,C(e).then((l=>{m&&clearTimeout(m),o.value="RESULT",y.value=l.result.songs,v.value.push(e)}))};return(l,m)=>{const f=a(s("uni-search-bar"),e);return t(),u(r,null,[i(f,{placeholder:b.value,bgColor:"#EEEEEE",onConfirm:E,radius:"20",onInput:p,cancelText:"取消",onCancel:T,modelValue:h.value,"onUpdate:modelValue":m[0]||(m[0]=e=>h.value=e)},null,8,["placeholder","modelValue"]),"DEFAULT"===o.value?(t(),n(U,{key:0,list:d.value,historyList:v.value,onChangeHistory:j,onChangeValue:D},null,8,["list","historyList"])):"RESULT"===o.value?(t(),n(V,{key:1,list:y.value},null,8,["list"])):"SUGGEST"===o.value?(t(),n(S,{key:2,list:_.value,onChangeValue:D},null,8,["list"])):c("",!0)],64)}}});export{b as default};
